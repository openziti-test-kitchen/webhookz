name: Ziti Webhook Workflow
on:
  workflow_call:

jobs:
  ziti-webhook:
    runs-on: ubuntu-latest
    name: Ziti Webhook Job
    steps:
      - name: Send Webhook
        uses: openziti/ziti-webhook-action-py@main
        if: ${{ env.ZITI_WEBHOOK_ACTION_ID != null }}
        env:
          ZITI_WEBHOOK_ACTION_ID: ${{ secrets.ZITI_WEBHOOK_ACTION_ID }}
        with:
          zitiId: ${{ secrets.ZITI_WEBHOOK_ACTION_ID }}
          webhookUrl: http://webhookz.ziti/post
          # webhookUrl: http://httpbin.ziti/post
          eventJson: ${{ toJson(github.event) }}
